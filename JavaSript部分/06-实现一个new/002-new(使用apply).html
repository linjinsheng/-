<!DOCTYPE html>
<html>
  <head>
    <title>DEMO</title>
  </head>
  <body>
    <div id="container"> 
    </div>
    
    <script>
    console.log('*************实现一个new******************')  
    /*
      1、创建一个新的空对象obj
      2、将新对象的原型指向当前函数的原型
      3、新创建的对象绑定到当前this上
      4、如果该函数没有返回对象或函数,则返回新创建的对象
    */
    function myNew(fn, ...args){
      let obj = Object.create(fn.prototype);
      let res = fn.apply(obj, args);
      if(res &&(typeof res === 'object' || typeof res === 'function')){
        return res;
      }
      return obj;
    }
    
    function Foo(name){
      this.name = name;
    }

    var luckyStar = myNew(Foo, 'luckyStar');
    console.log(luckyStar.name);
    </script>
  </body>
</html>
