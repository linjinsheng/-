<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<script>
// let obj = {a:1,b:2}
// console.log(obj)
//定义对象：
// let obj= new Object()
// obj.name = "zhangsan"
// obj.say = function(){}
// let obj = {}
//Object.defineProperty() 定义新属性 修改属性
// const obj = {
//     name:"zhangsan",
//     age:20,
//     info:{
//         address:{
//             addr:"月亮之上"
//         }
//     }
// }
// console.log(1,obj.name)
// Object.defineProperty(obj,"name",{  // 拦截操作
//     enumerable:true,//当前属性是否可循环
//     configurable:true, //当前属性是否可被设置
//     get(){
//         return 1111
//     },
//     set(newVal){
//         console.log("被覆盖了")
//         // obj.name = newVal
//     }
// })
// obj.name = "lisi"  //执行了 set
// console.log(2,obj.name) // 执行get

//观察者模式：
var targetObj1 = { name:"小李"}
var targetObj2 = { name:"小刘"}
//值改变时候的 处理函数
function observer(oldVal,newVal){
    //其他的业务逻辑....
    targetObj2.name = newVal
    console.log("t2值"+newVal)
}
//定义 name属性  set 和 get方法
Object.defineProperty(targetObj1,"name",{
    enumerable:true,//当前属性是否可循环
    configurable:true, //当前属性是否可被设置
    get:function(){
        return name
    },
    set:function(val){
        observer(name,val)
        name = val
    }
})
targetObj1.name = "zhangsan"
console.log(targetObj2.name)
targetObj1.name = "wangwu"
console.log(targetObj2.name)
</script>   
</body>
</html>